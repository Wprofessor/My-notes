# 目标检测的图像特征提取

> 参考：https://blog.csdn.net/zouxy09/article/details/7929570

## Haar特征

### Haar-like特征最早用于人脸检测

* #### Haar特征

#### Haar特征分为三类：边缘特征、线性特征、中心特征和对角线特征，组合成特征模版。特征模版内有白色和黑色两种矩阵，并定义该模型的特征值为白色矩阵像素和减去黑色矩阵像素和。Haar特征值反映了图像的灰度变化情况。比如：脸部的一些特征能由举证特征简单的描述，例如眼睛比脸颊颜色深、鼻梁两侧比鼻梁颜色深等，但矩阵只对一些简单的图形结构比较敏感如：边缘、线段较敏感，所以只能用来描述有特定走向的结构（水平、垂直、对角）。

![](http://img.my.csdn.net/uploads/201208/31/1346398889_7438.jpg)

##### 对于图中的A,B和D这类特征，特征数值计算公式为：v=Sum白-Sum黑，而对于C来说为：v=Sum白-2*Sum黑，之所以要将黑色区域像素x2是为了使两种矩形中像素数目相同。

##### 通过改变特征模版的大小和位子，可以在图像子窗口中穷举出大量的特征。上面的特征模版称为“特征原型”，特征原型在图像子窗口中扩展（平移伸缩）得到的特征值称为“矩形特征”，矩形特征的值称为“特征值”。矩形特征可位于图像任意位置，大小也可以任意改变，所以矩形特征值是矩形模版类别、矩形位置和矩形大小这三个因素的函数。故类别、大小和位置的变化，使得很小的检测窗口含有非常多的矩形特征，如：在24*24像素大小的检测窗口内矩形特征数量可以达到16万个。这样就有两个问题需要解决了：（1）如何快速计算那么多的特征？---积分图大显神通；（2）哪些矩形特征才是对分类器分类最有效的？---如通过AdaBoost算法来训练（这一块这里不讨论，具体见<http://blog.csdn.net/zouxy09/article/details/7922923>）

* #### Haar-like特征的计算-积分图

#####  积分图就是只遍历一次图像就可以求出图像中所有区域像素和的快速算法，大大的提高了图像特征值计算的效率。积分图主要的思想是将图像从起点开始到各个点所形成的矩形区域像素之和作为一个数组的元素保存在内存中，当要计算某个区域的像素和时可以直接索引数组的元素，不用重新计算这个区域的像素和，从而加快了计算（这有个相应的称呼，叫做动态规划算法）。积分图能够在多种尺度下，使用相同的时间（常数时间）来计算不同的特征，因此大大提高了检测速度。

